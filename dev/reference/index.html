<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · ROMS.jl</title><meta name="title" content="Reference · ROMS.jl"/><meta property="og:title" content="Reference · ROMS.jl"/><meta property="twitter:title" content="Reference · ROMS.jl"/><meta name="description" content="Documentation for ROMS.jl."/><meta property="og:description" content="Documentation for ROMS.jl."/><meta property="twitter:description" content="Documentation for ROMS.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ROMS.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Tutorial</a></li><li class="is-active"><a class="tocitem" href>Reference</a><ul class="internal"><li><a class="tocitem" href="#Model-grid"><span>Model grid</span></a></li><li><a class="tocitem" href="#Bathymetry"><span>Bathymetry</span></a></li><li><a class="tocitem" href="#Boundary-conditions-and-initial-conditions"><span>Boundary conditions and initial conditions</span></a></li><li><a class="tocitem" href="#Atmospheric-forcings"><span>Atmospheric forcings</span></a></li><li><a class="tocitem" href="#Thermodynamics"><span>Thermodynamics</span></a></li></ul></li><li><a class="tocitem" href="../plots/">Plots</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Alexander-Barth/ROMS.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Alexander-Barth/ROMS.jl/blob/master/docs/src/reference.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h1><h2 id="Model-grid"><a class="docs-heading-anchor" href="#Model-grid">Model grid</a><a id="Model-grid-1"></a><a class="docs-heading-anchor-permalink" href="#Model-grid" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.create_grid" href="#ROMS.create_grid"><code>ROMS.create_grid</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ROMS.create_grid(fname,h,f,lon_r,lat_r,mask_r,angle,pm,pn,dndx,dmde)</code></pre><p>Create a NetCDF grid file <code>fname</code> using the bathymetry <code>h</code>, Coriolis parameter <code>f</code> and longitude, latitude, mask, angle and strechting factors are rho-points.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This function currently only works for non-rotated grids (angle = 0) and the spherical grids.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/create_grid.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.smoothgrid" href="#ROMS.smoothgrid"><code>ROMS.smoothgrid</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">hsmooth = smoothgrid(h,hmin,rmax)</code></pre><p>Smooth the topography to get a maximum <code>r</code> factor equalt to <code>rmax</code></p><p>The original code is from Pierrick Penven from <a href="http://forge.ipsl.jussieu.fr/roms_locean/browser/Roms_tools/Preprocessing_tools/smoothgrid.m?rev=1">Roms_tools</a>. Copyright (c) 2002-2006 by Pierrick Penven, GPL</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/smoothgrid.jl#L1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.stiffness_ratios" href="#ROMS.stiffness_ratios"><code>ROMS.stiffness_ratios</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rx0,rx1 = ROMS.stiffness_ratios(mask_u,mask_v,z_w)
rx0,rx1 = ROMS.stiffness_ratios(domain)</code></pre><p>Compute maximum grid stiffness ratios following <a href="https://doi.org/10.1175/1520-0485(1993)023&lt;1736:NSOFAA&gt;2.0.CO;2">Beckmann and Haidvogel</a> (<code>rx0</code>) and <a href="https://doi.org/10.1175/1520-0485(1991)021&lt;0610:OTPGFO&gt;2.0.CO;2">Haney</a> (<code>rx1</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/stiffness_ratio.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.reduce_res" href="#ROMS.reduce_res"><code>ROMS.reduce_res</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> field = reduce_res(field,red);</code></pre><p>reduce resolution of field <code>field</code> by a factor &quot;red&quot;</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/reduce_res.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.stretching" href="#ROMS.stretching"><code>ROMS.stretching</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">s,C = stretching(Vstretching, theta_s, theta_b, hc, N, kgrid, report)</code></pre><p>Compute ROMS vertical coordinate stretching function.</p><p>Given vertical terrain-following vertical stretching parameters, this routine computes the vertical stretching function used in ROMS vertical coordinate transformation. Check the following (link)[https://www.myroms.org/wiki/index.php/Vertical_S-coordinate] for details:</p><p><strong>On Input:</strong></p><ul><li><code>Vstretching</code>:   Vertical stretching function:</li></ul><pre><code class="nohighlight hljs">                   Vstretching = 1,  original (Song and Haidvogel, 1994)
                   Vstretching = 2,  A. Shchepetkin (UCLA-ROMS, 2005)
                   Vstretching = 3,  R. Geyer BBL refinement
                   Vstretching = 4,  A. Shchepetkin (UCLA-ROMS, 2010)
                   Vstretching = 5,  Quadractic (Souza et al., 2015)</code></pre><ul><li><code>theta_s</code>:       S-coordinate surface control parameter (scalar)</li><li><code>theta_b</code>:       S-coordinate bottom control parameter (scalar)</li><li><code>hc</code>:            Width (m) of surface or bottom boundary layer in which                  higher vertical resolution is required during                  stretching (scalar)</li><li><code>N</code>:             Number of vertical levels (scalar)</li><li><code>kgrid</code>         Depth grid type logical switch:                  kgrid = 0,        function at vertical RHO-points                  kgrid = 1,        function at vertical W-points</li><li><code>report</code>        Flag to report detailed information (OPTIONAL):                  report = false,   do not report                  report = true,    report information</li></ul><p><strong>On Output:</strong></p><ul><li><code>s</code>:             S-coordinate independent variable, [-1 &lt;= s &lt;= 0] at                  vertical RHO- or W-points (vector)</li><li><code>C</code>:             Nondimensional, monotonic, vertical stretching function,                  C(s), 1D array, [-1 &lt;= C(s) &lt;= 0]</li></ul><p>The code is ported from the matlab code <code>stretching.m</code> from Hernan G. Arango. Copyright (c) 2002-2020 The ROMS/TOMS Group, Licensed under a <a href="https://www.myroms.org/main.php?page=License_ROMS">MIT/X style license</a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/stretching.jl#L1-L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.Grid" href="#ROMS.Grid"><code>ROMS.Grid</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">grid = ROMS.Grid(grid_fname,opt)</code></pre><p>Loads the ROMS grid from a NetCDF file <code>grid_fname</code>. The <code>grid</code> structure contains the longitude, latitude, depth (<code>z</code>), angle and mask at rho, u, v and w points for a C-grid.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>grid.z</code> corresponds to an elevation equal to zero.</p></div></div><p><strong>Example</strong></p><pre><code class="language-julia hljs">opt = (
    Tcline = 50,   # m
    theta_s = 5,   # surface refinement
    theta_b = 0.4, # bottom refinement
    nlevels = 32,  # number of vertical levels
    Vtransform  = 2,
    Vstretching = 4,
)
grid = ROMS.Grid(expanduser(&quot;~/Models/LS2v/LS2v.nc&quot;),opt)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/types.jl#L56-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.generate_grid" href="#ROMS.generate_grid"><code>ROMS.generate_grid</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ROMS.generate_grid(grid_fname,bath_name,xr,yr,red,opt,hmin,rmax)</code></pre><p>Generate the netCDF file <code>grid_fname</code> representing the model grid from the bathymetry file <code>bath_name</code>. The domain is bounded by the longitude range <code>xr</code> and the latitude range <code>yr</code>. The resolution of the bathymetry is reduced by the factors <code>red[1]</code> and <code>red[2]</code> in the longitude and latitude directions. <code>opt</code> is tuple with additional parameters describing the vertical axis. <code>hmin</code> and <code>rmax</code> is the minimum depth and <code>rmax</code> is the smoothness parameter of the bathymetry. The <span>$r$</span> parameter is defined as:</p><p><span>$r = \max\left( \underset{ij}{\max} \frac{|h_{i,j} - h_{i+1,j}|}{h_{i,j} + h_{i+1,j}},  \underset{ij}{\max} \frac{|h_{i,j} - h_{i,j+1}|}{h_{i,j} + h_{i,j+1}} \right)$</span></p><p>The parameter <code>opt</code> contains for example:</p><pre><code class="language-julia hljs"># model specific parameters
opt = (
    Tcline = 50,   # m
    theta_s = 5,   # surface refinement
    theta_b = 0.4, # bottom refinement
    nlevels = 32,  # number of vertical levels
    Vtransform  = 2,
    Vstretching = 4,
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/generate_grid.jl#L1-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.nudgecoef" href="#ROMS.nudgecoef"><code>ROMS.nudgecoef</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nudgecoef(domain,nudge_filename,alpha,Niter,halo,tscale; max_tscale = 5e5)</code></pre><p>Generate trace nudging coefficients with a value of <code>1/tscale</code> at the open boundaries over a <code>halo</code> grid cells. coefficients field smoothed spatially with a diffusion coefficient <code>alpha</code> over <code>Niter</code> iterations. For grid cells where the nudging time scale exceeds <code>max_tscale</code>, nudging is disabled (coefficient is set to zero).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/nudgecoef.jl#L48-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.diffusion2!" href="#ROMS.diffusion2!"><code>ROMS.diffusion2!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> diffusion2!(f,alpha,Niter)</code></pre><p>Two-dimensional diffusion of field <code>f</code>. <code>f</code> is the initial condition of field. <code>alpha</code> is a vector or tuple with two elements corresponding to the diffusion coefficient (multiplied by grid spacing) for the two dimensions. <code>Niter</code> is the number of iterations. On output, <code>f</code> is the field after <code>Niter</code> iterations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/diffusion2.jl#L1-L9">source</a></section></article><h2 id="Bathymetry"><a class="docs-heading-anchor" href="#Bathymetry">Bathymetry</a><a id="Bathymetry-1"></a><a class="docs-heading-anchor-permalink" href="#Bathymetry" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.gebco_load" href="#ROMS.gebco_load"><code>ROMS.gebco_load</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">x,y,b = gebco_load(bath_name,xr,yr)</code></pre><p>Loads GEBCO bathymetry with lon and lat range xr, yr.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/gebco_load.jl#L1-L5">source</a></section></article><h2 id="Boundary-conditions-and-initial-conditions"><a class="docs-heading-anchor" href="#Boundary-conditions-and-initial-conditions">Boundary conditions and initial conditions</a><a id="Boundary-conditions-and-initial-conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Boundary-conditions-and-initial-conditions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.CMEMS_zarr" href="#ROMS.CMEMS_zarr"><code>ROMS.CMEMS_zarr</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ds = ROMS.CMEMS_zarr(product_id,mapping,cachedir;
                chunks = 60,
                time_shift = 0,
                kwargs...
                )</code></pre><p>Returns a structure <code>ds</code> to connect to a CMEMS zarr server. The <code>mapping</code> parameter contains a dictorary linking the NetCDF CF standard namer to the underlying NetCDF variable names and the product identifers (more information is available in the product user manual). <code>cachedir</code> is a directory where the products are downloaded for caching.</p><p>While for most datasets (and CMEMS in the past) the time represents the central time the time axis. However since 2024, the time in the CMEMS Zarr data represents now the beginning of the time interval. Therefore <code>time_shift</code> has to be added to the time variable to account for this difference. For example, if for a daily dataset, the first time instance is the average from 2000-01-01:00:00:00 to 2000-01-02:00:00:00, then the Zarr file records <code>2000-01-01:00:00:00</code> (the beginning for the averaging interval) rather than <code>2000-01-01:12:00:00</code> (the center for the averaging interval). In this case, <code>time_shift</code> should be <code>12*60*60</code> (12 hours in seconds).</p><p><strong>Example</strong></p><p>The  values of <code>product_id</code> and <code>mapping</code> (with <code>dataset_id</code>)  below are specific to the Mediterranean Sea and must be adapted for other domains.</p><pre><code class="language-julia hljs">outdir = &quot;/tmp&quot;
product_id = &quot;MEDSEA_MULTIYEAR_PHY_006_004&quot;
mapping = Dict(
    # var  dataset_id
    :sea_surface_height_above_geoid =&gt; &quot;med-cmcc-ssh-an-fc-d&quot;,
    :sea_water_potential_temperature =&gt; &quot;med-cmcc-tem-an-fc-d&quot;,
    :sea_water_salinity =&gt; &quot;med-cmcc-sal-an-fc-d&quot;,
    :eastward_sea_water_velocity =&gt; &quot;med-cmcc-cur-an-fc-d&quot;,
    :northward_sea_water_velocity =&gt; &quot;med-cmcc-cur-an-fc-d&quot;,
)

dataset = ROMS.CMEMS_zarr(product_id,mapping,outdir,time_shift = 12*60*60)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/CMEMS.jl#L22-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.load" href="#ROMS.load"><code>ROMS.load</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">v,(x,y,z,t) = ROMS.load(ds,name::Symbol; kwargs...)</code></pre><p>Loads a variable from a remote resource <code>ds</code>. <code>name</code> is the NetCDF CF standard name.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/cdm.jl#L124-L129">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.interp_clim" href="#ROMS.interp_clim"><code>ROMS.interp_clim</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ROMS.interp_clim(domain,clim_filename,dataset,timerange;
                 padding = 0.5,
                 missing_value = -9999.)</code></pre><p>Interpolate <code>dataset</code> on the the model grid <code>domain</code> and creating the climatology file <code>clim_filename</code> for all dates between <code>timerange[1]</code> and <code>timerange[2]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/interp_clim.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.extract_ic" href="#ROMS.extract_ic"><code>ROMS.extract_ic</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ROMS.extract_ic(domain,clim_filename,icfile,t0::DateTime;
                time_origin = DateTime(1858,11,17))</code></pre><p>From the climatology <code>clim_filename</code> extract a single time instance at the time <code>t0</code> (or the nearest) and save the result into <code>icfile</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/extract_ic.jl#L1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.extract_bc" href="#ROMS.extract_bc"><code>ROMS.extract_bc</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ROMS.extract_bc(domain,clim_filename,bc_filename; missing_value = 9999)</code></pre><p>From the climatology <code>clim_filename</code> extract the boundary conditions at all open boundaries (using the <code>mask</code> in <code>domain</code>) and save the result into the netCDF <code>nc_filename</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/extract_bc.jl#L1-L7">source</a></section></article><h2 id="Atmospheric-forcings"><a class="docs-heading-anchor" href="#Atmospheric-forcings">Atmospheric forcings</a><a id="Atmospheric-forcings-1"></a><a class="docs-heading-anchor-permalink" href="#Atmospheric-forcings" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.prepare_ecmwf" href="#ROMS.prepare_ecmwf"><code>ROMS.prepare_ecmwf</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ROMS.prepare_ecmwf(
   atmo_fname,Vnames,filename_prefix,domain_name;
   time_origin = DateTime(1858,11,17),
   reset_accumulation = time -&gt; Time(time) in (Time(0,0),Time(12,0)),
)</code></pre><p>Generate ROMS forcing fields from the ECMWF data file <code>atmo_fname</code>. Note that some variables are <a href="https://www.myroms.org/forum/viewtopic.php?f=30&amp;t=3003">accumulated</a>. Per default, the accumulation is reset at 00:00 and 12:00 UTC. The accumulation period is determined from the time resolution (usually 3 hours).</p><p>Note ERA5 reanalysis (hourly data): <a href="https://confluence.ecmwf.int/display/CKB/ERA5%3A+data+documentation#ERA5:datadocumentation-Meanrates/fluxesandaccumulations">Accumulations are performed over the hour</a>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">datadir = &quot;...&quot;
atmo_fname = joinpath(datadir,&quot;ecmwf_sample_data.nc&quot;)
filename_prefix = joinpath(datadir,&quot;liguriansea_&quot;)
domain_name = &quot;Ligurian Sea Region&quot;
Vnames = [&quot;sustr&quot;,&quot;svstr&quot;,&quot;shflux&quot;,&quot;swflux&quot;,&quot;swrad&quot;,&quot;Uwind&quot;,&quot;Vwind&quot;,&quot;lwrad&quot;,
    &quot;lwrad_down&quot;,&quot;latent&quot;,&quot;sensible&quot;,&quot;cloud&quot;,&quot;rain&quot;,&quot;Pair&quot;,&quot;Tair&quot;,&quot;Qair&quot;]
ROMS.prepare_ecmwf(atmo_fname,Vnames,filename_prefix,domain_name)
)</code></pre><p>Based on forcing/d_ecmwf2roms.m (svn revision 1102):</p><pre><code class="nohighlight hljs">Copyright (c) 2002-2017 The ROMS/TOMS Group      Hernan G. Arango
Licensed under a MIT/X style license             John Wilkin
See License_ROMS.txt</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/Atmosphere/prepare_ecmwf.jl#L1-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.gfs_url" href="#ROMS.gfs_url"><code>ROMS.gfs_url</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">url = ROMS.gfs_url(time,tau;
         modelname = &quot;gfs&quot;,
         resolution = 0.25,
         baseurl = &quot;https://rda.ucar.edu/thredds/dodsC/files/g/ds084.1/&quot;)</code></pre><p>Returns the OPeNDAP url for the GFS data at time <code>time</code> (DateTime) and the forecast time <code>tau</code> (hours) from the archive specified at <code>baseurl</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/Atmosphere/prepare_gfs.jl#L7-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.download_gfs" href="#ROMS.download_gfs"><code>ROMS.download_gfs</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">atmo_src = ROMS.download_gfs(xr,yr,tr,cachedir)</code></pre><p>Downloads GFS 0.25° model results from the <a href="https://rda.ucar.edu/">NCAR Research Data Archive</a> within the longitude range <code>xr</code>, latitude range <code>yr</code> and time range <code>tr</code>. Ranges are list of two elements with the start and end value. Results are saved in <code>cachedir</code>.</p><p>See <code>ROMS.prepage_gfs</code> for an example.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/Atmosphere/prepare_gfs.jl#L51-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.prepare_gfs" href="#ROMS.prepare_gfs"><code>ROMS.prepare_gfs</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ROMS.prepare_gfs(
   atmo_src,Vnames,filename_prefix,domain_name;
   time_origin = DateTime(1858,11,17),
)</code></pre><p>Generate ROMS forcing fields from GFS data <code>atmo_src</code> (a generated by <code>ROMS.download_gfs</code>). The other arguments are the same as for <code>ROMS.prepage_ecmwf</code>. The example below shows all currently supported values for <code>Vnames</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">tr = (DateTime(2019,1,1),DateTime(2019,1,7))
xr = (7.5, 12.375)
yr = (41.875, 44.625)

cachedir = expanduser(&quot;~/tmp/GFS&quot;)
atmo_src = ROMS.download_gfs(xr,yr,tr,cachedir)

filename_prefix = &quot;liguriansea_&quot;
domain_name = &quot;Ligurian Sea Region&quot;
Vnames = [&quot;sustr&quot;,&quot;svstr&quot;,&quot;swflux&quot;,&quot;swrad&quot;,&quot;Uwind&quot;,&quot;Vwind&quot;,
          &quot;sensible&quot;,&quot;cloud&quot;,&quot;rain&quot;,&quot;Pair&quot;,&quot;Tair&quot;,&quot;Qair&quot;]
ROMS.prepare_gfs(atmo_src,Vnames,filename_prefix,domain_name)
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/Atmosphere/prepare_gfs.jl#L201-L229">source</a></section></article><h2 id="Thermodynamics"><a class="docs-heading-anchor" href="#Thermodynamics">Thermodynamics</a><a id="Thermodynamics-1"></a><a class="docs-heading-anchor-permalink" href="#Thermodynamics" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.vapor_pressure" href="#ROMS.vapor_pressure"><code>ROMS.vapor_pressure</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">e = ROMS.vapor_pressure(T)</code></pre><p>actual vapor pressure in hPa (millibars) from dewpoint temperature <code>T</code> in degree Celsius using using [1]. If <code>T</code> is the air temperature, then  <code>e</code> is the saturated vapor pressure over liquid water is given by:</p><p><span>$e(T) = 6.11 \cdot 10 ^ {\left(  \frac{7.5 T}{237.7 + T} \right)}$</span></p><p>[1] https://web.archive.org/web/20200926200733/https://www.weather.gov/media/epz/wxcalc/vaporPressure.pdf</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/Atmosphere/thermodynamics.jl#L18-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.vapor_pressure_Buck" href="#ROMS.vapor_pressure_Buck"><code>ROMS.vapor_pressure_Buck</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">e = ROMS.vapor_pressure_Buck(T)</code></pre><p>actual vapor pressure in hPa (millibars) from dewpoint temperature <code>T</code> in degree Celsius using using <a href="https://en.wikipedia.org/w/index.php?title=Arden_Buck_equation&amp;oldid=946509994">Buck (1996)</a>. If <code>T</code> is the air temperature, then  <code>e</code> is the saturated vapor pressure over liquid water is given by:</p><p><span>$e(T) = 6.1121 \exp \left(\left( 18.678 - \frac{T} {234.5}\right)\left( \frac{T} {257.14 + T} \right)\right)$</span></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/Atmosphere/thermodynamics.jl#L4-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.relative_humidity" href="#ROMS.relative_humidity"><code>ROMS.relative_humidity</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rh = ROMS.relative_humidity(temperature_2m_C,dew_temperature_2m_C)</code></pre><p>Compute the relative humidity (between 0 and 100) from temperature at 2 m, and dew_temperature at 2 m) both in degree Celsius)</p><p>[1] https://web.archive.org/web/20200926200733/https://www.weather.gov/media/epz/wxcalc/vaporPressure.pdf</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/Atmosphere/thermodynamics.jl#L35-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ROMS.latent_heat_of_vaporization" href="#ROMS.latent_heat_of_vaporization"><code>ROMS.latent_heat_of_vaporization</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">λ = ROMS.latent_heat_of_vaporization(T)</code></pre><p>Compute the latent heat of vaporization <code>λ</code> (J/kg) of water at temperature <code>T</code> (in degree Celsius).</p><p>The function implements equation 2.55 (page 38) of <a href="https://link.springer.com/content/pdf/10.1007/978-3-540-74666-9.pdf">Foken, T, 2008: Micrometeorology. Springer, Berlin, Germany</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Alexander-Barth/ROMS.jl/blob/15b5415d5eb4c2cad552167b27ec9409c514565a/src/Atmosphere/thermodynamics.jl#L48-L56">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Tutorial</a><a class="docs-footer-nextpage" href="../plots/">Plots »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Tuesday 19 November 2024 07:31">Tuesday 19 November 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
